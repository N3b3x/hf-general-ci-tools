---
name: üîç Test C++ Static Analysis

on:
  push:
    branches: [main, 'release/*']  # Run on main and release branches
    tags: ['v*']  # Run on version tags
  pull_request:
    branches: [main]  # Only run on PRs targeting main branch
  workflow_dispatch:

permissions:
  contents: read

concurrency:
  group: test-cpp-static-analysis-${{ github.ref }}
  cancel-in-progress: true

jobs:
  test-cppcheck:
    name: Test C++ Static Analysis (Cppcheck)
    uses: ./.github/workflows/c-cpp-static-analysis.yml
    with:
      # =============================================================================
      # Analysis Paths
      # =============================================================================
      # Analyze the sample C++ code in cpp-ci-test directory
      paths: "cpp-ci-test/src cpp-ci-test/include"
      
      # =============================================================================
      # C++ Standard
      # =============================================================================
      std: "c++17"
      
      # =============================================================================
      # Quality Control
      # =============================================================================
      # Set to false to allow the workflow to complete even if issues are found
      # This is for testing the tooling, not enforcing code quality
      strict: false