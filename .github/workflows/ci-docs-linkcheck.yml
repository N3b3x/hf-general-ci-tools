---
name: ðŸ”— Docs Link Check CI

on:
  push:
    branches: [main, 'release/*']  # Run on main and release branches
    tags: ['v*']  # Run on version tags
  pull_request:
    branches: [main]  # Only run on PRs targeting main branch
  workflow_dispatch:

permissions:
  contents: read

concurrency:
  group: ci-docs-linkcheck-${{ github.ref }}
  cancel-in-progress: true

jobs:
  test-linkcheck:
    name: Test Documentation Link Check
    uses: ./.github/workflows/ru-docs-linkcheck.yml
    with:
      # =============================================================================
      # Repository Configuration
      # =============================================================================
      checkout_recursive: true  # Test recursive checkout for submodule support

      # =============================================================================
      # Link Check Configuration
      # =============================================================================
      # Test comprehensive link checking with maximum features enabled
      paths: "docs/** *.md **/*.md"  # Comprehensive path patterns for all markdown
      fail_on_errors: false  # Don't fail workflow for CI testing purposes
      timeout: "30"  # Extended timeout per link for thorough testing
      max_retries: "3"  # Maximum number of retries per request
      retry_wait_time: "2"  # Wait 2 seconds between retries for thorough testing
      exclude_private: true  # Exclude private/internal links from checking
      exclude_mail: true  # Exclude mailto links from validation
      verbose: true  # Enable verbose output for detailed CI testing
      config_file: ""  # Use default lychee configuration (no custom config)
